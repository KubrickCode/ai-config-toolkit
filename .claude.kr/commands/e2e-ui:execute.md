---
description: Playwright MCP를 사용하여 순차적으로 UI E2E 테스트 구현, 버그 발견 시 중단
---

# UI E2E 테스트 구현 커맨드

## 사용자 입력

```text
$ARGUMENTS
```

테스트 번호를 추출하고 추가 컨텍스트가 있으면 고려합니다 (비어있지 않은 경우).

---

## 개요

1. **전제조건 확인**:
   - `docs/e2e-ui/test-targets.md` 존재 확인 (영문 버전, AI용)
   - 없으면 ERROR: "먼저 /e2e-ui:research를 실행하세요"

2. **프로젝트 타입 감지 및 스킬 로드**:
   - package.json 분석으로 프레임워크 감지 (React/Next.js/etc)
   - 감지된 프레임워크에 맞는 스킬 로드
   - 항상 `.claude/skills/typescript` 및 `.claude/skills/typescript-test` 로드 (있는 경우)

3. **테스트 대상 로드**:
   - 문서에서 테스트 시나리오 읽기
   - $ARGUMENTS에서 테스트 번호 추출 (제공된 경우)
   - 실행 순서 식별

4. **테스트 순차 실행**:
   - 각 테스트 시나리오에 대해 (순서대로):
     a. **수동 테스트 단계**: Playwright MCP로 동작 검증
     b. **버그 감지**: 이슈 확인
     c. **버그 발견 시 중단**: 버그 발견 시 즉시 보고 후 중단
     d. **코드 작성 단계**: 통과하면 Playwright 테스트 코드 작성
     e. **진행 상황 보고**: summary 문서 업데이트

5. **Summary 생성**:
   - 완료된 각 테스트에 대해 `docs/e2e-ui/summary-test-N.md` 생성
   - 전체 진행 상황 추적

6. **결과 보고**:
   - 완료된 테스트 목록
   - 버그 발견 시 보고 (세부사항 포함)
   - 다음 단계 안내

---

## 주요 규칙

### 🚨 버그 감지 (중요)

**다음 상황 발생 시 즉시 중단 및 보고**:

1. **페이지 로드 실패**:
   - 네비게이션 타임아웃
   - 404/500 에러
   - 빈 페이지

2. **요소 미발견**:
   - 예상 버튼/입력 누락
   - 잘못된 요소 속성
   - 잘못된 페이지 구조

3. **상호작용 실패**:
   - 클릭 작동 안 함
   - 입력 텍스트 입력 안 됨
   - 폼 제출 실패

4. **콘솔 에러**:
   - JavaScript 에러
   - 네트워크 실패 (예상된 경우 제외)
   - React 에러/경고

5. **예상치 못한 동작**:
   - 잘못된 네비게이션
   - 잘못된 데이터 표시
   - UI 요소 누락
   - 기능 고장

**버그 보고 형식**:

```markdown
## 🐛 버그 발견

**테스트**: [테스트 N: 이름]
**우선순위**: [Critical/High/Medium]

**테스트 중이던 내용**:
[설명]

**재현 단계**:

1. [단계 1]
2. [단계 2]
3. [여기서 버그 발생]

**예상 동작**:
[일어나야 할 일]

**실제 동작**:
[실제로 일어난 일]

**증거**:

- 스크린샷: [경로]
- 콘솔 에러: [있다면]
- 페이지 상태: [스냅샷 정보]

**영향**:
[사용자에게 미치는 영향]

**버그 발견 전 완료된 테스트**:

- [완료된 테스트 목록]
```

### ✅ 반드시 해야 할 것

- 테스트를 **한 번에 하나씩** (순차적으로) 실행
- 코드 작성 전 **실제 테스트**에 Playwright MCP 사용
- 버그 발견 시 **즉시 중단**
- 깔끔하고 유지보수 가능한 테스트 코드 작성
- TypeScript 및 테스트 코딩 표준 준수
- 각 테스트에 대한 summary 생성
- 증거로 스크린샷 촬영

### ❌ 절대 하지 말아야 할 것

- 여러 테스트 병렬 실행
- 수동 검증 단계 건너뛰기
- 버그 발견 후 계속 테스트
- 동작 검증 없이 테스트 코드 작성
- 콘솔 에러나 경고 무시
- 엣지 케이스 건너뛰기

### 🎯 테스트 구현 프로세스

각 테스트마다:

1. **수동 검증** (Playwright MCP 사용):

   ```
   - 페이지 이동
   - UI 요소와 상호작용
   - 스냅샷 촬영
   - 예상 동작 검증
   - 콘솔 메시지 확인
   ```

2. **버그 체크**:
   - 모든 것이 예상대로 작동했나?
   - 에러나 경고가 있나?
   - 동작이 올바른가?

3. **결정 시점**:
   - ✅ **통과하면**: 테스트 코드 작성 진행
   - 🐛 **버그 발견**: 중단, 보고, 종료

4. **테스트 코드 작성** (통과한 경우에만):

   ```typescript
   // 적절한 위치에 테스트 파일 생성
   // 프로젝트 테스트 패턴 따르기
   // assertion과 에러 처리 포함
   ```

5. **문서화**:
   - summary 문서 생성
   - 테스트한 내용 기록
   - 관찰사항 메모

---

## 문서 템플릿

생성할 파일: `docs/e2e-ui/summary-test-N.md`

````markdown
# 테스트 N: [시나리오 이름]

> **작성일**: [YYYY-MM-DD HH:mm]
> **관련 계획**: `test-targets.md` > 테스트 N
> **상태**: ✅ 통과 / 🐛 버그 발견

---

## 🎯 테스트 목표

[이 테스트가 검증하는 내용]

---

## 🧪 수동 검증 결과

**수행한 테스트 단계**:

1. [단계 1] - ✅ 성공
2. [단계 2] - ✅ 성공
3. [단계 3] - ✅ 성공

**스크린샷**:

- [스크린샷 1]: `path/to/screenshot1.png`
- [스크린샷 2]: `path/to/screenshot2.png`

**콘솔 출력**:

- [관련 콘솔 메시지]

**관찰사항**:

- [흥미로운 발견사항]

---

## 📝 생성된 테스트 코드

**파일**: `[path/to/test/file.spec.ts]`

**주요 Assertion**:

- [Assertion 1]
- [Assertion 2]

**코드 구조**:

```typescript
// 테스트 구조 간략 개요
test("시나리오 이름", async ({ page }) => {
  // 테스트 단계
});
```
````

---

## ✅ 검증

**테스트 실행**:

- 수동 검증: ✅ 통과
- 코드 구현: ✅ 완료
- 테스트 성공적 실행: [✅ / 아직 실행 안 됨]

**테스트한 엣지 케이스**:

- [엣지 케이스 1]: [결과]
- [엣지 케이스 2]: [결과]

---

## 📊 커버리지

**이 테스트가 커버하는 것**:

- [기능 1]
- [사용자 플로우 2]

**커버하지 않는 것** (향후):

- [범위 밖 항목]

---

## 🔑 기술적 노트

- [내린 기술적 결정]
- [필요한 경우 우회 방법]
- [필요한 의존성 또는 설정]

````

---

## 버그 보고 템플릿

버그 발견 시 생성: `docs/e2e-ui/bug-report-test-N.md`

```markdown
# 🐛 버그 보고: 테스트 N

> **발견일**: [YYYY-MM-DD HH:mm]
> **테스트**: 테스트 N: [시나리오 이름]
> **우선순위**: [Critical/High/Medium]

---

## 📋 버그 요약

[버그에 대한 한 문장 설명]

---

## 🔍 세부사항

**테스트 중이던 내용**:
[테스트 시나리오 설명]

**재현 단계**:

1. [단계 1]
2. [단계 2]
3. [여기서 버그 발생]

**예상 동작**:
[일어나야 할 일]

**실제 동작**:
[실제로 일어난 일]

---

## 📸 증거

**스크린샷**:
- [스크린샷 1]: `path/to/screenshot.png`

**콘솔 에러**:
````

[콘솔 에러 메시지 붙여넣기]

````

**페이지 상태**:
```yaml
[페이지 스냅샷 또는 관련 HTML]
````

---

## 💥 영향

**사용자 영향**:
[최종 사용자에게 미치는 영향]

**심각도**:
[이 우선순위 레벨인 이유]

---

## ✅ 버그 발견 전 완료된 테스트

이 버그가 발견되기 전에 다음 테스트들이 성공적으로 완료되었습니다:

1. 테스트 1: [이름] - ✅ 통과
2. 테스트 2: [이름] - ✅ 통과
   ...

**생성된 테스트 코드**:

- `[path/to/test1.spec.ts]`
- `[path/to/test2.spec.ts]`

**이 테스트들은 커밋할 준비가 되었습니다.**

---

## 🔄 다음 단계

1. 사용자가 이 버그 보고서 검토
2. 개발자가 버그 수정
3. 수정 후 다시 실행: `/e2e-ui:execute N`으로 이 테스트부터 계속

```

---

## 실행 흐름

### 초기화
1. 프로젝트 타입 감지 및 적절한 스킬 로드
2. 테스트 대상 문서 로드 (docs/e2e-ui/test-targets.md - 영문 버전, AI용)
3. 실행할 테스트 결정
4. 기존 summary 확인 (재개 기능)

### 각 테스트마다
1. **알림**: "테스트 N 시작: [이름]"
2. **수동 테스트**:
   - Playwright MCP 도구 사용
   - 이동, 상호작용, 검증
   - 스크린샷 촬영
   - 콘솔 확인
3. **평가**:
   - 동작이 올바른가?
   - 에러가 있나?
4. **결정**:
   - 버그면: 버그 보고서 생성, 중단, 종료
   - 통과면: 계속
5. **코드 작성**:
   - 테스트 파일 생성
   - 테스트 로직 구현
   - 코딩 표준 준수
6. **문서화**:
   - summary 생성
   - 발견사항 기록
7. **진행**: "테스트 N 완료. 테스트 N+1로 이동 중..."

### 완료
- 모든 테스트 통과: 축하, 요약 제공
- 버그 발견: 버그 보고서 제공, 완료된 테스트 목록 제공

---

## 실행

위 가이드라인에 따라 작업을 시작하세요.
```
